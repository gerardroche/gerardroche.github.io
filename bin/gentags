#!/bin/sh

set -e
unset CDPATH
unset IFS

TAGS=""

for post in _posts/*.md; do
    tags="$(grep "tags: " "$post" | sed 's/^tags: //')"
    for tag in $tags; do
        TAGS="$TAGS\n$tag"
    done

    TAGS="$(echo "$TAGS" | sort -u)"
done

for tag in $TAGS; do
    echo "---\nlayout: tag\n---" > "_archive-tags/$tag.html"
    echo "Generated tag file: '$tag'"
done
